\chapter{Number Theory}

To understand the internals SNARKs it is foremost important to understand the basics of finite field arithmetics AND STUFF.

%Summary of this chapter
We therefore start with a brief introduction to fundamental algebraic terms like fields, field extensions AND STUFF . We define these terms in the general abstract way of mathematics, hoping that the non mathematical trained reader will gradually learn to become comfortable with this style. We then give basic examples, that likely all of us know and do basic computations with these examples. 

The motivated reader is then encuraged to do some exercises from  the apendix of this chapter.

\section{Preliminaries}
INTO-BLA


The classic reference \cite{HW} is recommended to. In addition, \cite{FO} is a somewhat more application-oriented book, which certainly has a lot to offer the reader interested in cryptology.

\subsection{Integer Arithmetics}
\label{integer_arithmetics}
We start by a recapitulation of basic arithmetics as most of us will probably recall from school.

In what follows we write $\Z$ for the set $\{\ldots, -3,-2,-1,0,1,2,3,\ldots\}$ of all integers, together with the usual addition, subtraction and multiplication of integers. Moreover we write$\mathbb{N}$ the set of positive integers and $\mathbb{N}_0$ the set of non-negative integers.

Of course division is not well defined for integers and one of the most basic but at the same time highly important technique, that every reader must become familiar with is the following (kind of) replacement for devision of integers called \textit{Euklidean division} (\cite{AL}
\begin{theorem}[Euklidean Division]
Let $ a \in \Z $ be an integer and $ b \in \N $ a natural number. Then there are always two numbers $ m \in \Z $ and $ r \in \N $, with $ 0 \leq r <b $ such that
\begin{equation}
\label{eq: euklidean_division}
a = m \cdot b + r
\end{equation}
This decomposition of $a$ given $b$ is called \textbf{Euklidean division} or \textbf{division with remainder} and $ a $ is called the \textbf{divident}, $ b $ is called the \textbf{divisor},$m$ is called the quotient and $r$ is called the \textbf{remainder}. 
\end{theorem}
\begin{remark}
\label{eq: euklidean_division_notation}
If $ a, b, m $ and $ r $ satisfy the equation (\ref{eq: euklidean_division}), we often write $ \Zdiv{a}{b}: = m $ to describe the quotient and use the symbol $ \Zmod{a}{b}: = r $ for the remainder. We also say, that an integer $ a $ is divided by a number $ b $ if $ \Zmod{a}{b} = 0 $ holds. In this case we also write $ a | b $ (\cite{AL} Note 1 below).
\end{remark}
\begin{example}
Using our previously defined notation, we have $ \Zdiv{-17}{4 } = - 5 $ and $ \Zmod{-17}{4} = 3 $, because $ -17 = -5 \cdot 4 + 3 $  is the Euklidean division of $-17$ and $4$ (Since the remainder is by definition a non-negative number). In this case $4$ does not divide $-17$ as the reminder is not zero. Writing $-17 | 4$ therefore has no meaning.

On the other hand we can write $12 | 4$, since $4$ divides $12$, as $ \Zmod{12}{4} = 0 $.
\end{example}
A fundamental property of Euklidean division is that both the quotient and the remainder exist and are unique. The result is therefore independent of any algorithm that actually does the computation.

Methods for computing the division with remainder are called \textit{integer division algorithms}. Probably the best known algorithm is the so called \textit{long division}, that most of us might have learned in school. It should be noted however that there are faster algorithms like \textit{Newtonâ€“Raphson division} known.

As long division is the standard algorithm used for pen-and-paper division of multi-digit numbers expressed in decimal notation, the reader should become familiar with this algorithm as we use it all over this book when we do simple pen-and-paper computations.

In a nutshell, the algorithm shifts gradually from the left to the right end of the dividend, subtracting the largest possible multiple of the divisor (at the digit level) at each stage; the multiples then become the digits of the quotient, and the final difference is then the remainder. To be more precise one version of the algorithm looks like this:

\begin{algorithmic}
\State Divide $n$ by $d$
\State If $d = 0$ then error(DivisionByZeroException) end
\State $Q \leftarrow 0 $ -- Initialize quotient to zero
\State $R \leftarrow 0 $ -- Initialize remainder to zero               
\State TO APPEAR
\end{algorithmic}

\begin{example}[Integer Log Division] To give an example of the basic integer long division algorithm most of us learned at school, lets divide the integer $157843853$ by the number $261$. 

So the goal is to find quotient and reminder $m,r \in \N$ such that
$$157843853 = 261 * m +r$$
holds. Using a notation that is mostly used in Commonwealth countries we can then compute
%\longdivision{157843853}{261} 

TO-APPEAR 
\end{example}

Another important algorithm frequently used in computations with integers is the so-called \textit{extended Euclidean algorithm}, which calculates the greatest common divisor $ gcd (a, b) $ of two natural numbers $ a $ and $ b \in \N $, as well as two additional integers $ s, t \in \Z $, such that the equation
\begin{equation}
\label{eq: erw_Eukl_algo}
gcd (a, b) = s \cdot a + t \cdot b
\end{equation}
holds. Two numbers are called \textbf{relative prime}, if their greates common divisor is $1$.

The following pseudocode shows in detail how to calculate these numbers with the extended Euclidean algorithm (\cite{JB} chapter 2.9):




\begin{definition}
\label{theorem: ext_Euclid}
Let the natural numbers $ a, b \in \N $ be given. Then the so-called \textit{extended Euclidean algorithm} is given by the following calculation rule:
\begin{algorithmic}
\State $ \begin{array}{ccccc}
r_0: = a, & r_1: = b, & s_0: = 1, & s_1: = 0, & k: = 1
\end{array} $
\While{$ r_{k} \neq 0 $}
\State $ q_k: = \Zdiv{r_{k-1}}{r_k} $
\State $ r_{k + 1}: = r_{k-1} -q_k \cdot r_k $
\State $ s_{k + 1}: = s_{k-1} -q_k \cdot s_k $
\State $ k \gets k + 1 $
\EndWhile
\end{algorithmic}
As a result, the algorithm computes the integers $ gcd (a, b): = r_k $, as well as $ s: = s_k $ and $ t: = \Zdiv{(r_k-s_k \cdot a)}{b} $ such that the equation
$ gcd (a, b) = s \cdot a + t \cdot b $ holds.
\end{definition}
\begin{example} To illustrate the algorithm, lets apply it to the numbers $ (12,5) $. We compute
\begin{center}
  \begin{tabular}{c | c c l}
    k & $ r_k $ & $ s_k $ & $ t_k = \Zdiv{(r_k-s_k \cdot a)}{b} $ \\\hline
    0 & 12 & 1 & 0 \\
    1 & 5 & 0 & 1 \\
    2 & 2 & 1 & -2 \\
    3 & 1 & -2 & 5 \\
  \end{tabular}
\end{center}
From this one can see that $ 12 $ and $ 5 $ are relatively prime (since their greatest common divisor is $ gcd (12, 5) = 1 $) and that the equation $ 1 = (-2) \cdot 12 + 5 \cdot 5 $ holds.
\end{example}

\subsection{Modular arithmetic}
Congruence or modlar arithmetics (sometimes also called residue class arithmetics) is of central importance for understanding most modern crypto systems. In this section we will therefore take a closer look at this arithmetic. For the notation in cryptology see also \cite{JB} Chapter 3, or \cite{AL} Chapter 3.

MORE-HIGH-LEVEL-DESCRIPTION

Utilizing Euklidean division as explained previously (\ref{integer_arithmetics}), congruency of two integers with respect to a so-called moduli can be defined as follows
(\cite{JB} chapter 3.1):
\begin{definition}[congruency] Let $ a $, $ b \in \Z $ be two integers and $ n \in \N $ a natural number.
Then $ a $ and $ b $ are said to be \textbf{congruent with respect to the modulus} $ n $, if and only if the equation
\begin{equation}
\Zmod{a}{n} = \Zmod{b}{n}
\end{equation}
holds. In this case we write
$ \kongru{a}{b}{n} $. If two numbers are not congruent with respect to a given modulus $n$, we call them \textit{incongruent} w.r.t. $n$.
\end{definition}
So in other words, if some modulus $n$ is given, then two integers are congruent with respect to this modulus if both Euclidean divisions by $n$ give the same remainder.   
\begin{example}To give a simple example, lets assume that we choose the modulus $271$. Then we have
$$ \kongru{7}{2446}{271} $$
since both $\Zmod{7}{271} = 7$ as well as $\Zmod{2446}{271}=7$
\end{example}
The following theorem describes a fundamental property of modulus arithmetic, which is not known in the traditional arithmetics of integers: (\cite{JB} chapter 3.11):
\begin{theorem} [Fermat's Little Theorem] Let $ p \in \Prim $ be a prime number and $ k \in \mathbb{Z} $ is an integer, then:
\begin{equation}
\kongru{k ^ p}{k}{p} \;,
\end{equation}
\end{theorem}
\begin{proof} 
\end{proof}
\begin{remark}
Fermats theorem is also often written as the equivalent equation $\kongru{k ^{p-1}}{1}{p}$, which can be derived from the original equation by dividing both sides of the congruency by $k$. 
\end{remark}
Another theorem that is important for doing calculations with congruences is the following Chinese remainder theorem, as it provides a way to solves systems congruency equations (\cite{JB} chapter 3.15).

\begin{theorem} [Chinese remainder theorem]
For any $ k \in \N $ let coprime natural numbers $ n_1, \ldots n_k \in \N $ as well as the integers $ a_1, \ldots a_k \in \Z $ be given. Then the so-called \textit{simultaneous congruency}
\begin{equation}
\begin{array}{c}
\kongru{x}{a_1}{n_1} \\
\kongru{x}{a_2}{n_2} \\
\cdots \\
\kongru{x}{a_k}{n_k} \\
\end{array}
\end{equation}
has a solution and all possible solutions of this congruence system are congruent modulo
$ n_1 \cdot \ldots \cdot n_k $.
\end{theorem}
\begin{proof} (\cite{JB} chapter 3.15)
\end{proof}
\begin{remark}From the proof as given in \cite{JB} chapter 3.15, the following algorithm to find all solutions to any given system of congruences can be derived TODO:WRITE IN ALGORITHM STYLE
\begin{itemize}
\item Compute $N=n_1 \cdot n_ 2\cdot\ldots\cdot n_k$
\item For each $1\leq j \leq k$, compute 
$N_j = \frac{N}{n_j}$
\item For each $1\leq j \leq k$, use the extended Euklidean algorithm (\ref{theorem: ext_Euclid}) to compute numbers $s_j$ as well as $t_j$, such that $1 = s_j \cdot n_j + t_j \cdot N_j $ holds.
\item A solution to the congruency system is then given by $x = \sum_{j=1}^k a_j\cdot t_j\cdot N_j$.
\item Compute $m = \Zmod{x}{N}$. The set of all possible solutions is then given by
$ x+m\cdot\Z = \{\ldots, x-2m, x-m,x,x+m, x+2m, \ldots \} $.
\end{itemize} 
\end{remark}

\begin{remark}
This is the classical Chinese remainder theorem as it was already known in ancient China. Under certain circumstances, the theorem can be extended to non-coprime moduli $ n_1, \ldots, n_k $.
\end{remark}
\begin{example} To illustrate how to solve simultaneous congruences using the Chinese remainder theorem, let's look at the following system of congruencies:
$$
\begin{array}{c}
\kongru{x}{4}{7} \\
\kongru{x}{1}{3} \\
\kongru{x}{3}{5} \\
\kongru{x}{0}{11} \\
\end{array}
$$
So here we have $ N = 7 \cdot 3 \cdot 5 \cdot 11 = 1155 $, as well as
$ N_1 = 165 $, $ N_2 = 385 $, $ N_3 = 231 $ and $ N_4 = 105 $. From this we calculate with the extended Euclidean algorithm
$$
\begin{array}{cccc}
 1 = & -47 \cdot 7 & + & 2 \cdot 165 \\
 1 = & -128 \cdot 3 & + & 1 \cdot 385 \\
 1 = & -46 \cdot 5 & + & 1 \cdot 231 \\
 1 = & -19 \cdot 11 & + & 2 \cdot 105 \\
\end{array}
$$
so we have
$x = 4 \cdot 2 \cdot 165 + 1 \cdot 1 \cdot 385 + 3 \cdot 1 \cdot 231 + 0 \cdot 2 \cdot 105 = 2398$
as one solution. Because $ \Zmod{2398}{1155} = 88 $ the set of all solutions is
$ \{\ldots, -2222, -1067,88,1243, 2398, \ldots \} $. In particular, there are infinitely many different solutions.
\end{example}

Congruency modulo $ n $ is an equivalence relation on the set of integers, where each class is the set of all integers that have the same remainder when divided by $n$. If then follows from the properties of Euclidean division,that there are exactly $ n $ different equivalence classes. 

If we go a step further and identify each equivalence class with the corresponding remainder of the Euclidean division, we get a new set, where integer addition and multiplication can be projected to a new kind of addition and multiplication on the equivalence classes. 

Roughly speaking the new rules are computed by taking any element of the firsr equivalence class and and element of the second, then add or multiply them in the usual way and see in which equivalence class the result is contained.

The following theorem makes the idea precises
\begin{theorem}
\label{def: residual class ring}
Let $ n \in \N _{\geq 2} $ be a fixed, natural number and
$ \Z_n $ the set of equivalence classes of integers with respect to the  congruence modulo $ n $ relation. Then $ \Z_n $ forms a commutative ring with unit with respect to the addition and multiplication defined above.
\end{theorem}
\begin{proof} (\cite{AL} sentence 1)  
\end{proof}
\begin{remark}
DESCRIBE NEUTRAL ELEMENTS AND HOW TO ADD, EXPLAIN HOW TO FIND THE NEGATIVE OF A NUMBER AND HOW TO SUBTRACT AND HOW TO MULTIPLY...
\end{remark}
The following example makes the abstract idea more concrete
\begin{example} [Arithmetics modulo $6$]
\label{z_6}
Choosing the modulus $ n = 6 $ we have six equivalence classes of integers which are congruent modulo $ 6 $ (which have the same remainder when divided by $6$). We write
$$
\begin{array}{lll}
0: = \{\ldots, -6,0,6,12, \ldots \}, &
1: = \{\ldots, -5,1,7,13, \ldots \}, &
2: = \{\ldots, -4,2,8,14, \ldots \} \\
3: = \{\ldots, -3,3,9,15, \ldots \}, &
4: = \{\ldots, -2,4,10,16, \ldots \}, &
5: = \{\ldots, -1,5,11,17, \ldots \}
\end{array}
$$
Now to compute the addition of those equivalence classes, say $2+5$, one chooses arbitrary elements from both sets say $14$ and $-1$, adds those numbers in the usual way and then looks in which equivalence class the result will be. 

So we have $14+(-1)=13$ and $13$ is in the equivalence class (of) $1$. Hence in $Z_6$ we have that $2+5=1$!

Applying the same reasoning to all equivalence classes, addition and multiplication can  be transferred to the equivalence classes and the results are summarized in the following addition and multiplication tables for $ \Z_6 $:
\begin{center}
  \begin{tabular}{c | c c c c c c}
    + & 0 & 1 & 2 & 3 & 4 & 5\\\hline
    0 & 0 & 1 & 2 & 3 & 4 & 5 \\
    1 & 1 & 2 & 3 & 4 & 5 & 0\\
    2 & 2 & 3 & 4 & 5 & 0 & 1\\
    3 & 3 & 4 & 5 & 0 & 1 & 2\\
    4 & 4 & 5 & 0 & 1 & 2 & 3\\
    5 & 5 & 0 & 1 & 2 & 3 & 4
  \end{tabular} \quad \quad \quad \quad
  \begin{tabular}{c | c c c c c c}
$ \cdot $ & 0 & 1 & 2 & 3 & 4 & 5 \\\hline
        0 & 0 & 0 & 0 & 0 & 0 & 0\\
        1 & 0 & 1 & 2 & 3 & 4 & 5\\
        2 & 0 & 2 & 4 & 0 & 2 & 4\\
        3 & 0 & 3 & 0 & 3 & 0 & 3\\
        4 & 0 & 4 & 2 & 0 & 4 & 2\\
        5 & 0 & 5 & 2 & 3 & 2 & 1
  \end{tabular}
\end{center}

These two tables are all you need to be able to calculate in $ \Z_6 $. For example, to determine the multiplicative inverse of a remainder class, look for the entry that results in $ 1 $ in the product table. For example the multiplicative inverse of $ 5 $ is $ 5 $ itself, since $5\cdot 5 = 1$. Similar to the integers not all numbers have inverses. For example there is no element, that when multiplied with $4$ will give $1$. 
However in contrast to what we know from integers, there are non zero numbers, that, when multiplied gives zero (e.g $4\cdot 4 =0$).
\end{example}

\section{Galois fields}
As we have seen in the previous section, modular arithmetics behaves in many ways similar to ordinary arithmetics of integers. But in contrast to arithmetics on integers or rational numbers, we deal with a finite set of elements, which when implemented on computers will not lead to precision problems.

However as we have seen in the last example modular arithmetics is at the same time very different from integer arithmetics as the product of non zero elements can be zero. In addition it is also different from the arithmetics of rational numbers, as there is often no multiplicative inverse, hence no division defined. 

In this section we will see that modular arithmetics behaves very nicely, whenever the modulus is a prime number. In that case the rules of modular arithmetics exactly parallels exactly the well know rules of rational arithmetics, despite the fact that the actually computed numbers are very different.

The resulting structures are the so called prime fields and they are the base for many of the contemporary algebra based cryptographic systems.

Since Galois fields are strongly connectedto prime numbers we start with
a short overview of prime numbers and provide few basic properties like the fundamental theorem of arithmetic, which says that every natural number can be represented as a finite product of prime numbers.

The key insight here, is that when the modulus is a prime number, modular arithmetic has a well defined division, that is absent for general moduli.

A prime number $ p \in \N $ is a natural number $ p \geq 2 $, which is divisible by itself and by $ 1 $ only. Such a prime number is called \textit{odd} if it is not the number $ 2 $. We write $ \Prim $ for the set of all prime numbers and $ \Prim _{\geq 3} $ for the set of all odd prime numbers.

As the Greek mathematician Euclid was able to prove by contradiction in the famous \textit{theorem of Euclid}, no largest prime number exists. The set of all prime numbers is thus infinite \cite{AL}.

Since prime numbers are especially natural numbers, they can be ordered according to size, so that one can get the sequence
\begin{equation}
\label{eq: primenumber_sequence}
p_n: = 2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47, 53, 59, 61, 67, \ldots
\end{equation}
of all prime numbers, which is sequence $ A000040 $ in OEIS or \cite{HW} chapter 1.4). In particular, we can talk about small and large prime numbers.

As the following theorem shows, prime numbers are in a certain sense the basic units from which all other natural numbers are composed:
\begin{theorem}[The Fundamental Theorem of Arithmetic]
\label{theorem: primfactor_decomposition}
Let $ n \in \N_{\geq 2} $ be a natural number. Then there are prime numbers 
$ p_1, p_2, \ldots, p_k \in \Prim $, such that:
\begin{equation}
n = p_1 \cdot p_2 \cdot \ldots \cdot p_k \;.
\end{equation}
Except for permutations in the factors, this representation is unique and is called the \textbf{prime factorization} of $ n $.
\end{theorem}
\begin{proof} (\cite{AL} sentence 6.) 
\end{proof}
\begin{remark}
An important question is how fast we can compute the prime factorization of a natural number? This is the famous \textit{factorization problem}. As far as we know, there is no method on a classical Turing machine that is able to compute this representation in polynomial time. The fastest algorithms known today run sub-exponentially, with $\mathcal{O}((1+ \epsilon)^n)$ and some $ \epsilon> 0 $. THe interested reader can find more on this exciting topic in \cite{JB} Chapter 10.
\end{remark}
\begin{remark}
It should be pointed out however hat the American mathematician Peter Williston Shor developed an algorithm in 1994 which can calculate the prime factor representation of a natural number in polynomial time on a quantum computer \cite{PS}.

The consequence of this is, of course, that cryosystems, which are based on the time complexity of the prime factor problem, are unsafe as soon as practically usable quantum computers are available.
\end{remark} 


\begin{definition}[Prime Fields] (\cite{JB} example 3.4.4 or \cite{AL} definition 3.1)
Let $p \in \Prim$ be a prime number. Then we write $ (\F, +, \cdot) $ for the set of congruency classes and the induced addition and multiplication 
as described in theorem (\ref{def: rest class ring}) and call it the \textbf{prime field} of characteristic $p$.
\end{definition}
\begin{remark}
We have seen in (\ref{def: residual class ring}) how do compute addition, subtraction and multiplication in modular arithmetics. AS prime fields are just a special case where the modulus is a prime number, all this stays the same. In addition we have also seen in example (XXX) that division is not always possible in modular arithmetics. However the key insight here is, that division is well defined when the modulus is a prime number. This means that in a prime field we can indeed define devision.

To be more precise, division is really just multiplication with the so called multiplicative inverse, which is really just another element, such that the product of both elements is equal to $1$. This is well known from fractional numbers, where for example the multiplicative element of say $3$ is simply $1/3$, since $3\cdot 1/3 =1$. Division by $3$ is then noth but multiplication by the inverse $1/3$. For example $7/3 = 7 \cdot 1/3$.

We can apply the same reasoning when it comes to prime fields and define division as multiplication with the multiplicative inverse, which leads to the question of how to find the multiplicative inverse of an equivalence class $ x \in \F_p $ in a prime field. 

As with all fields, $0$ has no inverse, which implies, that division by zero is undefined. So lets assume $ x \neq 0 $. Then $ gcd (x, p) = 1 $, since $p$ is a prime number and therefore has no divisors (see \ref{theorem: primfactor_decomposition}). 

So we can use the extended Euclidean algorithm (REF) to compute numbers $x^{-1}, t \in \mathbb{Z} $ with $ s \cdot x + t \cdot p = 1 $, which gives $x^{-1}$ as the multiplicative inverse of $x$ in $\F_p$, since $ \kongru{x^{-1}x}{1}{p}$. 
\end{remark}
\begin{example}
To summarize the basic aspects of computation in prime fields, lets consider the prime field $\F_5$ and simplify the following expression 
$$\left(\frac{2}{3} - 2\right)\cdot 2 $$
A first thing to note is that since $F_5$ is a field all rules like bracketing (distributivity), summing ect. are identical to the rules we learned in school when we where dealing with rational, real or complex numbers.

So we start by evaluating the bracket and get $\left(\frac{2}{3} - 2\right)\cdot 2 = \frac{2}{3}\cdot 2 - 2\cdot 2= \frac{2\cdot 2}{3} - 2\cdot 2$. Now we evaluate $2\cdot 2 = 4$, since $\Zmod(4,5)=4$ and $-(2\cdot 2) = -4=5-4=1$, since the negative of a number is just the modulus minus the original number. We therefore get $\frac{2\cdot 2}{3} - 2\cdot 2 = \frac{4}{3}+1$. 

Now to compute the faction, we need the multiplicative inverse of $3$, which is the number, that when multiplies with $3$ in $\F_5$ gives $1$. So we use the extended Euclidean algorithm to compute
$$x^{-1}\cdot 3 + t \cdot 5 =1$$
Note that in the Euclidean algorithm the compuations of each $t_k$ is irrelevant here:
\begin{center}
  \begin{tabular}{c | c c l}
    k & $ r_k $ & $ x^{-1}_k $ & $ t_k = \Zdiv{(r_k-s_k \cdot a)}{b} $ \\\hline
    0 & 3 & 1 & $\cdot$\ \\
    1 & 5 & 0 & $\cdot$ \\
    2 & 3 & 1 & $\cdot$ \\
    3 & 2 &-1 & $\cdot$ \\
    4 & 1 & 2  & $\cdot$ \\
  \end{tabular}
\end{center}
So the multiplicative inverse of $3$ in $\Z_5$ is $2$ and indeed if compute $3\cdot 2$ we get $1$ in $\F_5$. 

This implies that we can rewrite our original expression into $\frac{4}{3}+1 = 4\cdot 2 + 1 = 3+1 =4$.
\end{example}

The following important property immediately follows from Fermat's little theorem:
\begin{lemma}
\label{lemma: klein_satz_fermat}
Let $ p \in \Prim $ be a prime number and $ \Z_p $ be associated prime field of the characteristic $ p $. Then the equations
\begin{equation}
\begin{array}{ccc}
x^p = x & \text{or} & x^{p-1} = 1.
\end{array}
\end{equation}
holds for all elements $ x \in \Z_p $ with $x\neq 0$.
\end{lemma}

In order to give the reader an impression of how prime fields can be seen, we give a full computation of a prime field in the following example
\begin{example} [The prime field $ \Z_5 $]
\label{primkoerper_z_5}
For $ n = 5 $ we have five equivalence classes of integers which are congruent modulo $ 5 $. We write
$$
\begin{array}{ccc}
0: = \{\ldots, -5,0,5,10, \ldots \}, &
1: = \{\ldots, -4,1,6,11, \ldots \}, &
2: = \{\ldots, -3,2,7,12, \ldots \} \\
3: = \{\ldots, -2,3,8,13, \ldots \}, &
4: = \{\ldots, -1,4,9,14, \ldots \}
\end{array}
$$
Addition and multiplication can now be transferred to the equivalence classes. This results in the following addition and multiplication tables in $ \Z_5 $:
\begin{center}
  \begin{tabular}{c | c c c c c}
    + & 0 & 1 & 2 & 3 & 4 \\\hline
    0 & 0 & 1 & 2 & 3 & 4 \\
    1 & 1 & 2 & 3 & 4 & 0 \\
    2 & 2 & 3 & 4 & 0 & 1 \\
    3 & 3 & 4 & 0 & 1 & 2 \\
    4 & 4 & 0 & 1 & 2 & 3 \\
  \end{tabular} \quad \quad \quad \quad
  \begin{tabular}{c | c c c c c}
$ \cdot $ & 0 & 1 & 2 & 3 & 4 \\\hline
      0 & 0 & 0 & 0 & 0 & 0 \\
      1 & 0 & 1 & 2 & 3 & 4 \\
      2 & 0 & 2 & 4 & 1 & 3 \\
      3 & 0 & 3 & 1 & 4 & 2 \\
      4 & 0 & 4 & 3 & 2 & 1 \\
  \end{tabular}
\end{center}

These two tables are all you need to be able to calculate in $ \Z_5 $. For example, to determine the multiplicative inverse of an element, look for the entry that results in $ 1 $ in the product table. This is the multiplicative inverse. For example the multiplicative inverse of $ 2 $ is $ 3 $ and the multiplicative inverse of $4$ is $4$ itself, since $4\cdot 4=1$.
\end{example}


\subsection{Square Roots}
In this part we deal with \textit{square numbers} and \textit{square roots} in prime fields. To do this, we first define what square roots actually are. We roughly follow Chapter 6.5 in \cite{HW}.
\begin{definition}[quadratic residue and square roots] Let
$p \in \Prim $ a prime number and $\F_p $ the associate prime field. Then a number $x\in \F_p$ is called a \textbf{square root} of another number $y\in\F_p$, if $x$ is a solution to the equation
\begin{equation}
x^2 = y
\end{equation}
On the other hand, if $y$ is given and the quadratic equation has no $x$ solution, we call $ y $ as \textit{quadratic non-residue}. For any $ y \in \F_p $ we write
\begin{equation}
\sqrt{y} _{| p}: = \{x \in \F_p \; | \; x^2 = y \}
\end{equation}
for the set of all square roots of $ y $ in the prime field
$ \F_n $. (If $ y $ is a quadratic non-residue, then $ \sqrt{y}_{| p} = \emptyset $ and if $ y = 0 $, then $ \sqrt{y}_{| p} = \{0 \} $)
\end{definition}
\begin{remark}
The notation $ \sqrt{y}_{| n} $ for the root of square residues is not found in textbooks, but it is quite practical to clearly distinguish between roots in different prime fields as the symbol $ \sqrt{y} $ is  ambiguous and it must also be specified in which prime field this root is actually meant.
\end{remark}
\begin{remark}
It can be shown that in any prime field every non zero element has either no square root or two of them. We adopt the convention to call the smaller one (when interpreted as an integer) as the \textbf{positive} square root and the larger one as the \textbf{negative}. This makes sense, as the larger one can always be computed as the modulus minus the smaller one, which is the definition of the negative in prime fields. 
\end{remark}

\begin{example} [square numbers and roots in $ \F_5 $] Let us consider our example (\ref{primkoerper_z_5}) again. All square numbers can be found on the main diagonal of the multiplication table. As you can see, in $ \Z_5 $ only get the square root of $ 0 $, $ 1 $ and $ 4 $ are non empty sets and we get $ \sqrt{0}_{| 5} = \{0 \} $, $ \sqrt{1}_{| 5} = \{1,4 \} $, $ \sqrt{2}_{ | 5} = \emptyset $, $ \sqrt{3}_{| 5} = \emptyset $ and $ \sqrt{4}_{| 5} = \{2,3 \} $.
\end{example}
In order to describe whether an element of a prime field is a square number  or not, we define (\cite{HW} chapter 6.5) the so called Legendre Symbol as its of used in the literature
\begin{definition}[Legendre symbol] Let $ p \in \Prim $ be a prime number and $ y \in \F_p $ an element of the associated prime field. Then the so-called \textit{Legendre symbol} of $ y $ is defined as follows:
\begin{equation}
\label{eq: Legendre-symbol}
\left (\frac{y}{p} \right): =
\begin{cases}
1 & \text{if $ y $ has square roots} \\
-1 & \text{if $ y $ has no square roots} \\
0 & \text{if $ y = 0 $}
\end{cases}
\end{equation}
\end{definition}
\begin{example}
If we look again at the example (\ref{primkoerper_z_5}) we have the following Legendre symbols
$$
\begin{array}{ccccc}
\left (\frac{0}{5} \right) = 0, &
\left (\frac{1}{5} \right) = 1, &
\left (\frac{2}{5} \right) = -1, &
\left (\frac{3}{5} \right) = -1, &
\left (\frac{4}{5} \right) = 1 \;.
\end{array}
$$
\end{example}

The following theorem  gives a simple criterion for calculating the legendre symbol.
\begin{theorem} [Euler criterion] Let $ p \in \Prim_{\geq 3} $ be an odd 
Prime number and $ y \in \F_p $. Then the Legendre symbol can be computed as 
\begin{equation}
\label{eq: Euler_criterium}
\left (\frac{y}{p} \right) = y^{\frac{p-1}{2}} \;.
\end{equation}
\end{theorem}
\begin{proof} (\cite{HW} proposition 83) 
\end{proof}
So the question remains how to actually compute square roots in prime field. The following algorithms give a solution
\begin{definition}[Tonelli-Shanks algorithm]
\label{def: Tonelli-Shanks}
Let $ p $ be an odd prime number $ p \in \Prim _{\geq 3} $ and $ y $ a quadratic residue in $ \Z_p $. Then the so-called Tonneli \cite{TA} and Shanks \cite{SD} algorithm computes the two square roots of $ y $. It is defined as follows:
\begin{enumerate}
\item Find $ Q, S \in \Z $ with $ p-1 = Q \cdot 2 ^ S $ such that $ Q $ is odd.
\item Find an arbitrary quadratic non-remainder $ z \in \Z_p $.
\item
\begin{algorithmic}
\State $ \begin{array}{ccccc}
M: = S, & c: = z ^ Q, & t: = y ^ Q, & R: = y ^{\frac{Q + 1}{2}}, & M, c, t, R \in \Z_p
\end{array} $
\While{$ t \neq 1 $}
\State Find the smallest $ i $ with $ 0 <i <M $ and $ t ^{2 ^ i} = 1 $
\State $ b: = c ^{2 ^{M-i-1}} $
\State $ \begin{array}{ccccc}
M: = i, & c: = b ^ 2, & t: = tb ^ 2, & R: = R \cdot b
\end{array} $
\EndWhile
\end{algorithmic}
The results are then the square roots $ r_1: = R $ and $ r_2: = p-R $ of $y$ in $\F_p$.
\end{enumerate}
\end{definition}


\begin{remark}
The algorithm (\ref{def: Tonelli-Shanks}) works in prime fields for any odd prime numbers. From a practical point of view, however, it is efficient only if the prime number is congruent to $ 1 $ modulo $ 4 $, since in the other case the formula from the proposition \ref{theorem: square_roots}, which can be calculated more quickly, can be used.
\end{remark}

\subsection{Polynome}
Following \cite{LK} we want to develop the ring of polynomials or the formal power series. To do this, we first specify the underlying quantities, then describe the corresponding addition and multiplication and finally state some norms on them:
\begin{definition}[Polynomials]
Let R be a commutative integrity domain with unit 1.
Then we name the expression
\begin{equation}
\sum _{n = 0} ^{m}{a} _{n}{t} ^{n} ={a} _{0} +{a} _{1} t +{a} _{2} t ^ 2 + \dots + a_m t ^ m \;,
\end{equation}
with the unknown $ t $ and the coefficients $ a_n $ from R
\textit{Polynomial with coefficients from R} and write
$ R [t] $ for the set of all polynomials with coefficients from R.
\end{definition}
We often simply write $ P (t) $ for a polynomial or a formal power series and denote the constant term accordingly with $ P (0) $. Furthermore, we always see it as a given, we also simply write "formal power series" when we actually mean "formal power series with coefficients in $ R $".
\begin{example}
\label{def: zero polynomial}
The so-called \textit{zero polynomial} (or the zero series) is the polynomial (or the formal power series) $ \sum_{n = 0} ^ \infty a_n t ^ n $ which (s) arises when we use all coefficients as Assume zero, ie set $ a_n = 0 $ for all $ n \in \mathbb{N} $. In analogy to the additively neutral element $ 0 \in R $, we also simply write $ 0 $ for this polynomial (this series).

The so-called \textit{single polynomial} (or the one series) is the polynomial (or the formal power series) $ \sum_{n = 0} ^ \infty a_n t ^ n $ which (s) arises when we $ a_0 = Set 1 $ and assume all other coefficients as zero, ie $ a_n = 0 $ for \"ur all $ n \in \mathbb{N} $. In analogy to the multiplicatively neutral element $ 1 \in R $, we also simply write $ 1 $ for this polynomial (this series).
\end{example}
\begin{definition}[degree] The \textit{degree} $ degree (P (t)) $ of a polynomial
$ P (t) \in R [t] $ is defined as follows: If $ P (t) $ is the zero polynomial, we set $ Grad (P (t)): = - \infty $. For every other polynomial we set $ degree (P (t)) = n $ if $ a_n $ is the highest non-vanishing coefficient of $ P (t) $.
\end{definition}
In order to be able to make the set of these polynomials or the formal power series into a commutative integral ring, we have to introduce the sum and the product of two formal power series and then show that the ring axioms are met. "ullt are. The following definition gives the corresponding operations for formal power series
(see e.g. \cite{LK}). A definition for polynomials is analogous.
\begin{definition} Let $ \sum _{n = 0} ^{\infty}{a} _{n}{t} ^{n} $ and
$ \sum _{n = 0} ^{\infty}{b} _{n}{t} $ select two formal power series
$ R [[t]] $. Then your \textit{sum} and your \textit{product}
defined as follows:
\begin{equation}
\sum _{n = 0} ^{\infty}{a} _{n}{t} ^{n} + \sum _{n = 0} ^{\infty}{b} _{n}{t } ^{n} = \sum _{n = 0} ^{\infty}{({a} _{n} +{b} _{n})}{t} ^{n}
\end{equation}
\begin{equation}
\bigg (\sum _{n = 0} ^{\infty}{a} _{n}{t} ^{n} \bigg) \cdot \bigg (\sum _{n = 0} ^{\infty }{b} _{n}{t} ^{n} \bigg) = \sum _{n = 0} ^{\infty} \sum _{i = 0} ^{n}{a} _{i }{{b} _{ni}}{t} ^{n}
\end{equation}
\end{definition}
In the case of polynomials, it is only necessary to note that the degree of the sum is exactly the maximum of the degrees of the summands and that the degree of the product is exactly the sum of the degrees of the factors.

To see that the ring axioms are fulfilled, it is first clear that both polynomials and formal power series form a commutative group with respect to addition, the neutral element being the zero polynomial $ 0 $ and the additive inverse element is given by $ - \sum_{n = 0} ^ \infty a_n t ^ n $ The properties of a commutative group then follow from the corresponding properties in $ R $.

For the multiplication one sees immediately that the single polynomial is the neutral element and that commutativity or associativity follow from the corresponding properties in $ R $.

The distributive laws also result from the corresponding rules in $ R $, so that overall it is shown


Since bodies, complete bodies and their algebraic closings play a central role in the analogy between Bernoulli and Carlitz-Bernoulli numbers, in the following we want all of the definitions and definitions that are important to us Briefly repeat and summarize the necessary properties on this topic.
For a detailed consideration of the so-called body theory see for example Chapter 13 in \cite{MA} and for the mentioned analogy see \cite{DG} and \cite{DT}.
\begin{definition}[body]
A body $ (\mathbb{K}, +, \cdot) $ is a set $ \mathbb{K} $, provided with two links $ +: \mathbb{K} \cdot \mathbb{K} \to \mathbb{K} $ and $ \cdot: \mathbb{K} \cdot \mathbb{K} \to \mathbb{K} $, called \textit{addition} and \textit{multiplication}, so that the following conditions are met :
\begin{itemize}
\item $ \left (\mathbb{K}, + \right) $ is an Abelian group, where the neutral element is denoted here with $ 0 $.
\item $ \left (\mathbb{K} \setminus \left \{0 \right \}, \cdot \right) $ is an Abelian group, where the neutral element is called $ 1 $.
\item For all $ a, b, c \in \mathbb{K} $ the distributive laws apply:
$$ a \cdot \left (b + c \right) = a \cdot b + a \cdot c \quad \text{and} \quad
\left (a + b \right) \cdot c = a \cdot c + b \cdot c $$
\end{itemize}
The \textit{characteristic} of a body $ \mathbb{K} $ is the smallest natural number $ n \geq 1 $, for which the $ n $ -fold sum of the one $ 1 $ equals zero, ie f \"ur which $ \sum_{i = 1} ^ n 1 = 0 $ applies.
If such a $ n> 0 $ exists, the body is also called \textit{finite characteristic}. If, on the other hand, every finite sum of ones is not equal to zero, then the body will have the characteristic $ 0 $ and one also speaks of a \textit{vanishing} characteristic.

A body $ \mathbb{K} $ is called \ss{} t \textit{completely \"andig} if
it is complete as a ring. A complete body
is also called \textit{non-Archimedean} if it is not Archimedean as a ring.

A body $ \mathbb{K} $ is called \textit{algebraically closed} if every non-constant polynomial $ P (t) \in \mathbb{K} [t] $
has a root in $ \mathbb{K} $.
\end{definition}
\begin{definition}[The finite bodies] Let $ p \in \mathbb{N} $ be a prime number. Then $ \mathbb{K} _p $ denotes the \textit{remainder class body \"orper} $ \mathbb{ Z} / p \mathbb{Z} $ and $ \mathbb{K} _{p ^ n} $, for each $ n \in \mathbb{N} $, the finite K (unique except for isomorphism) \"orper with $ p ^ n $ elements.
\end{definition} 



\subsection{Exponents and Logarithms}





