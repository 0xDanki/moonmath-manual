\chapter{Introduction}
% ATTENTION! THIS IS ALL COPY PASTED FROM SOMEWHERE; SO CAN ONLY BE USED AS GUIDENCE AND NEEDS TO BE REWRITTEN

% Climate Dao whitepaper
\begin{comment}
Zero knowledge proofs are a class of cryptographic protocols in which one can prove
honest computation without revealing the inputs to that computation. A simple high-level
example of a zero-knowledge proof is the ability to prove knowledge o
without revealing the respective age. In a typical zero knowledge proof system, there
are two participants: a prover and a verifier. A prover will present a mathematical proof
of computation to a verifier to prove honest computation. The verifier will then confirm
whether the prover has performed honest computation based on predefined methods.
Zero knowledge proofs are of particular interest to public blockchain activities as the
verifier can be codified in smart contracts as opposed to trusted parties or third-party
intermediaries.

% https://docs.zkproof.org/reference.pdf

Zero-knowledge proofs (ZKPs) are an important privacy-enhancing tool from cryptography. Theyallow proving the veracity of a statement, related to confidential data, without revealing any in-formation beyond the validity of the statement. ZKPs were initially developed by the academiccommunity in the 1980s, and have seen tremendous improvements since then. They are now ofpractical feasibility in multiple domains of interest to the industry, and to a large community ofdevelopers and researchers. ZKPs can have a positive impact in industries, agencies, and for per-sonal use, by allowing privacy-preserving applications where designated private data can be madeuseful to third parties, despite not being disclosed to them. 

ZKP systems involve at least two parties: a prover and a verifier. The goal of the prover is toconvince the verifier that a statement is true, without revealing any additional information. Forexample, suppose the prover holds a birth certificate digitally signed by an authority. In orderto access some service, the prover may have to prove being at least 18 years old, that is, thatthere exists a birth certificate, tied to the identify of the prover and digitally signed by a trustedcertification authority, stating a birthdate consistent with the age claim. A ZKP allows this, withoutthe prover having to reveal the birthdate.
\end{comment}

\section{Target audience}
\begin{comment}
% copy pasted from https://claritybook.netlify.app/ch00-00-introduction.html
% need adoption to our case
This book is accessible for both beginners and experienced readers alike. Concepts are gradually introduced in a logical and steady pace. Nonetheless, the chapters lend themselves rather well to being read in a different order. More experienced developers might get the most benefit by jumping to the chapters that interest them most. If you like to learn by example, then you should go straight to the chapter on Using Clarinet.

It is assumed that you have a basic understanding of programming and the underlying logical concepts. The first chapter covers the general syntax of Clarity but it does not delve into what programming itself is all about. If this is what you are looking for, then you might have a more difficult time working through this book unless you have an (undiscovered) natural affinity for such topics. Do not let that dissuade you though, find an introductory programming book and press on! The straightforward design of Clarity makes it a great first language to pick up.

%\section{Aims and target audience}
\tbds{Sylvia: This subsection should be in the introduction of the book as it applies to the entire math part \label{intro-shift_1}}
\end{comment}
How much mathematics do you need to understand \uterm{zero-knowledge proofs}? The answer, of course, depends on the level of understanding you aim for. It is possible to describe zero-knowledge proofs without using mathematics at all; however, to read a foundational paper like \cite{Groth16} and to understand the internals of snark implementations, some knowledge of mathematics is needed to be able to follow the discussion. 

%The goal of this chapter is therefore to enable a reader who is starting out with nothing more than basic high school algebra to be able to solve simple tasks in the mathematics underlying most zero knowledge proofs without the need of a computer.

Without a solid grounding in mathematics, someone who is interested in learning the concepts of zero-knowledge proofs, but who has never seen or dealt with, say, a prime field \ref{prime_fields}, or an elliptic curve \ref{chap:elliptic-curves}, may quickly become overwhelmed. This is not so much due to the complexity of the mathematics needed, but rather because of the vast amount of technical jargon, unknown terms, and obscure symbols that quickly makes a text unreadable, even though the concepts themselves are not actually that complicted. As a result, the reader might either lose interest, or pick up some incoherent bits and pieces of knowledge that, in the worst case scenario, result in immature and unsecure code. 

This is why we dedicated large parts of the book to explaining the mathematical foundations needed to understand the basic concepts underlying snark development. We encourage the reader who is not familiar with basic number theory and elliptic curves to take the time and read this and the following chapters, until they are able to solve at least a few exercises in each chapter.

%If, on the other hand, you are already skilled in elliptic curve cryptography, feel free to skip this chapter and only come back to it for reference and comparison. Maybe the most interesting parts are XXX \sme{add references}.

We start our explanations at a very basic level, and only assume pre-existing knowledge of fundamental concepts like high school integer arithmetic. At the same time, we'll attempt to teach you to ``think mathematically'', and to show you that there are numbers and mathematical structures out there that appear to be very different from the things you learned about in high school, but on a deeper level, they are actually quite similar, as we will see in various examples below in this chapter.

To make it easier to memorize new concepts and symbols, we might frequently link to definitions in the beginning, but as to many links render a text unreadable, we will assume the reader will become familiar with definitions as the text proceeds at which point we will not link them anymore.

We want to stress, however that this introduction is informal, incomplete and optimized to enable the reader to understand zero-knowledge concepts as efficiently as possible. Our focus and design choices are to include as little theory as necessary, focusing on a wealth of numerical examples. We believe that such an informal, example-driven approach to learning mathematics may make it easier for beginners to digest the material in the initial stages. 

For instance, as a beginner, you would probably find it more beneficial to first compute a simple toy \term{snark} with pen and paper all the way through, before actually developing real-world production-ready systems. In addition, it's useful to have a few simple examples in your head before getting started with reading actual academic papers.

However, in order to be able to derive these toy examples, some mathematical groundwork is needed. This chapter therefore will help the inexperienced reader to focus on what we believe is important, accompanied by exercises that you are encouraged to recompute yourself. Every section usually ends with a list of additional exercises in increasing order of difficulty, to help the reader memorize and apply the concepts. 

\section{Preface and Acknowledgements}
[To APPEAR]

\section{Purpose of the book}
This book began as a set of lecture and notes one of the authors gave at the \href{https://www.zksummit.com/}{Zero Knowledge Summit - ZK0x02} in Berlin. It arose from the desire to collect the scattered information around the topic of zk-SNARKS and present them to an audience that does not have a strong background in cryptography.

The first version of this book is written by security auditors at Least Authority where we audited quite a few snark based systems. It includes "what we have learned" distillate of the time we spend on various audits and serves as a polished version of what one might call an auditors adoptation of classical \href{https://en.wikipedia.org/wiki/Lab_notebook}{lab notebooks}.  

We intend to let illustrative examples drive the discussion and present the key ideas of all basic concepts relevant to the understanding of zk-SNARKS with as little mathematics as possible. For those who are new to this topic, it is our hope that this book might be particularly useful as a first read and prelude to more complete or advanced expositions.

On the other hand, we also hope our beginner-friendly intentions do not leave
the more advanced readers dissatisfied by our chosen lack of formality, so in
cases where our discussion does sacrifice rigor, we will point the reader to the proper literature.

After more than a decade of intense and fast-paced research by mathematicians
and cryptographers around the globe on zk-SNARKS, the field is now racing towards full maturity and in our believe first saturation effects appear at the horizon. A purpose of the book is therefore, that an understanding of this text will equip the reader with most
of what they need to know in order to tackle any of the vast literature in this
remarkable field, at least for a while yet.

Early in the book we will develop examples that we then later extend with most of the things we learn in each chapter. This way we incrementally build a few real world snarks but over full fledged cryptographic systems that are nevertheless simple enough to be computed by pen and paper to illustrate all steps in great detail.

\section{How to read the book}
Since the Moonmath Manual aims to become a complete introduction to all topics relevant for beginners, there are different path to read it, besides linear.

The reader who is first of all interested in building a simple pen and paper zk-SNARK and to fill their knowledge gaps as they appear throughout the process, only, might want to start with out 3-factorization example []. In [] we introduce the 3-factorization problem as a statement in a formal language. If this is to abstract, the reader might start in [] where we described the 3-factorization problem as an algebraic circuit. In [] we introduce various levels of zero-knowledge and we show how to compute solutions in []. We then transform the circuit into an associated Rank-1 Constraint System in [] and transform that constraint  system into an Quadratic Arithmetic Program in []. In [] we show how solutions are transformed into polynomial divisibility problems. In [] we then use the result of those examples to derive a Groth16 zk-SNARK for the 3-factorization problem. In [] we compute the prover and the verifier key. in [] we compute a zk-SNARK and in [] we verify that zk-SNARK. In [] we show how to simulate proofs. 

The reader who wants to get a better understanding about elliptic curves as they arise in zero knowledge based proving systems, might want to start with our introduction of the BLS6\_6 curve [], which is a pen and paper, pairing friendly elliptic curve. All concepts needed to understand this curve are introduced in chapter []. The BLS6\_6 is useful, because
programmers who develop real world SNARKS, frequently face the situation where it would be useful do some pen-and-paper computations before implementing the real thing. In the MMM we specifically designed the BLS6\_6 curve for this purpose. Its a pairing friendly curve, that has all the properties needed to do pairing based computations without any computer assistence, which often helps to understand delicate details of your system. 



\begin{comment}
\section{The Zoo of Zero-Knowledge Proofs}

{First, a list of zero-knowledge proof systems:

\begin{enumerate}
	\item Pinocchio (2013): \href{https://eprint.iacr.org/2013/279.pdf}{{Paper}}
	\begin{itemize}[label={--}]
		\item Notes: trusted setup
	\end{itemize}

	\item BCGTV (2013): \href{https://eprint.iacr.org/2013/507.pdf}{{Paper}}
	\begin{itemize}[label={--}]
		\item Notes: trusted setup, implementation
	\end{itemize}

	\item BCTV (2013): \href{https://eprint.iacr.org/2013/879.pdf}{{Paper}}
	\begin{itemize}[label={--}]
		\item Notes: trusted setup, implementation
	\end{itemize}

	\item Groth16 (2016): 	\href{https://eprint.iacr.org/2016/260.pdf}{Paper}
	\begin{itemize}[label={--}]
		\item Notes: trusted setup
		\item Other resources: \href{https://www.gakonst.com/zksummit2019.pdf}{Talk in 2019 by Georgios Konstantopoulos}
	\end{itemize}

	\item GM17 (207): 	\href{https://eprint.iacr.org/2017/540.pdf}{Paper}
	\begin{itemize}[label={--}]
		\item Notes: trusted setup
		\item Other resources: later \href{https://eprint.iacr.org/2018/187}{Simulation extractability in ROM, 2018}
	\end{itemize}

	\item Bulletproofs (2017): \href{https://eprint.iacr.org/2017/1066.pdf}{Paper}
	\begin{itemize}[label={--}]
		\item Notes: no trusted setup
		\item Other resources: \href{https://eprint.iacr.org/2016/263.pdf}{Polynomial Commitment Scheme on DL, 2016} and \href{https://www.iacr.org/archive/asiacrypt2010/6477178/6477178.pdf}{KZG10, Polynomial Commitment Scheme on Pairings, 2010}
	\end{itemize}

	\item Ligero (2017): \href{https://acmccs.github.io/papers/p2087-amesA.pdf}{Paper}
	\begin{itemize}[label={--}]
		\item Notes: no trusted setup
		\item Other resources: 
	\end{itemize}

	\item Hyrax (2017): \href{https://eprint.iacr.org/2017/1132.pdf}{Paper}
	\begin{itemize}[label={--}]
		\item Notes: no trusted setup
		\item Other resources: 
	\end{itemize}

	\item STARKs (2018): \href{https://eprint.iacr.org/2018/046.pdf}{Paper}
	\begin{itemize}[label={--}]
		\item Notes: no trusted setup 
		\item Other resources: 
	\end{itemize}

	\item Aurora (2018): \href{https://eprint.iacr.org/2018/828.pdf}{Paper}
	\begin{itemize}[label={--}]
		\item Notes: transparent SNARK
		\item Other resources:
	\end{itemize}

	\item Sonic (2019): \href{https://eprint.iacr.org/2019/099.pdf}{Paper}
	\begin{itemize}[label={--}]
		\item Notes: SNORK - SNARK with universal and updateable trusted setup, PCS-based
		\item Other resources: \href{https://www.benthamsgaze.org/2019/02/07/introducing-sonic-a-practical-zk-snark-with-a-nearly-trustless-setup/}{Blog post by Mary Maller from 2019} and \href{https://eprint.iacr.org/2018/280}{work on updateable and universal setup from 2018}
	\end{itemize}

	\item Libra (2019): \href{https://eprint.iacr.org/2019/317}{Paper}
	\begin{itemize}[label={--}]
		\item Notes: trusted setup
		\item Other resources:
	\end{itemize}

	\item Spartan (2019): \href{https://eprint.iacr.org/2019/550.pdf}{Paper}
	\begin{itemize}[label={--}]
		\item Notes: transparent SNARK
		\item Other resources:
	\end{itemize}

	\item PLONK (2019): \href{https://eprint.iacr.org/2019/953.pdf}{Paper}
	\begin{itemize}[label={--}]
		\item Notes: SNORK, PCS-based
		\item Other resources: \href{https://www.plonk.cafe/t/welcome-to-discussion-of-plonk-related-research/24}{Discussion on Plonk systems} and \href{https://github.com/Fluidex/awesome-plonk}{Awesome Plonk list}
	\end{itemize}

	\item Halo (2019): \href{https://eprint.iacr.org/2019/1021}{Paper}
	\begin{itemize}[label={--}]
		\item Notes: no trusted setup, PCS-based, recursive
		\item Other resources: 
	\end{itemize}

	\item Marlin (2019): \href{https://eprint.iacr.org/2019/1047.pdf}{Paper}
	\begin{itemize}[label={--}]
		\item Notes: SNORK, PCS-based
		\item Other resources: \href{https://github.com/arkworks-rs/marlin}{Rust Github}
	\end{itemize}

	\item Fractal (2019): \href{https://eprint.iacr.org/2019/1076.pdf}{Paper}
	\begin{itemize}[label={--}]
		\item Notes: Recursive, transparent SNARK
		\item Other resources: 
	\end{itemize}

	\item SuperSonic (2019): \href{https://eprint.iacr.org/2019/1229.pdf}{Paper}
	\begin{itemize}[label={--}]
		\item Notes: transparent SNARK, PCS-based
		\item Other resources: \href{https://eprint.iacr.org/2021/358}{Attack on DARK compiler in 2021}
	\end{itemize}

	\item Redshift (2019): \href{https://eprint.iacr.org/2019/1400}{Paper}
	\begin{itemize}[label={--}]
		\item Notes: SNORK, PCS-based
		\item Other resources: 
	\end{itemize}



\end{enumerate}

\textbf{Other resources on the zoo: } \href{https://github.com/matter-labs/awesome-zero-knowledge-proofs}{Awesome ZKP list on Github}, \href{https://zkp.science/}{ZKP community} with the \href{https://docs.zkproof.org/reference.pdf}{reference document}

}

\paragraph{To Do List}
\begin{itemize}
	\item Make table for prover time, verifier time, and proof size
	\item Think of categories - \textit{Achieved Goals}: Trusted setup or not, Post-quantum or not, \dots
	\item Think of categories - \textit{Mathematical background}: Polynomial commitment scheme, \dots
	\item \dots while we discuss the points above, we should also discuss a common notation/language for all these things. (E.g. transparent SNARK/no trusted setup/STARK)
\end{itemize}

\paragraph{Points to cover while writing}
\begin{itemize}
	\item Make a historical overview over the "discovery" of the different ZKP systems
	\item Make reader understand what paper is build on what result etc. - the tree of publications!
	\item Make reader understand the different terminology, e.g. SNARK/SNORK/STARK, PCS, R1CS, updateable, universal, $\dots$
	\item Make reader understand the mathematical assumptions - and what this means for the zoo.
	\item Where will the development/evolution go? What are bottlenecks?
\end{itemize}

\vspace*{1em}
{\footnotesize
\hspace*{-1em}\textbf{Other topics I fell into while compiling this list}
\begin{itemize}
	\item Vector commitments: \url{https://eprint.iacr.org/2020/527.pdf}
	\item Snarkl: \url{http://ace.cs.ohio.edu/~gstewart/papers/snaarkl.pdf}
	\item Virgo?: \url{https://people.eecs.berkeley.edu/~kubitron/courses/cs262a-F19/projects/reports/project5_report_ver2.pdf}
\end{itemize} 
}

\end{comment}

