\chapter{Number Theory}

To understand the internals SNARKs it is foremost important to understand the basics of finite field arithmetics AND STUFF.

%Summary of this chapter
We therefore start with a brief introduction to fundamental algebraic terms like fields, field extensions AND STUFF . We define these terms in the general abstract way of mathematics, hoping that the non mathematical trained reader will gradually learn to become comfortable with this style. We then give basic examples, that likely all of us know and do basic computations with these examples. 

The motivated reader is then encuraged to do some exercises from  the apendix of this chapter.

\section{Preliminaries}
We start by a recapitulation of basic arithmetics as most of us will probably recall from school.

In what follows we write $\Z$ for the set $\{\ldots, -3,-2,-1,0,1,2,3,\ldots\}$ of all integers, together with the usual addition, subtraction and multiplication of integers.

Of course division is not well defined for integers and one of the most basic but at the same time highly important technique, that every reader must become familiar with is the following (kind of) replacement for devision of integers called \textit{Euklidean division} (\cite{AL}
\begin{theorem}[Euklidean Division]
Let $ a \in \Z $ be an integer and $ b \in \N $ a natural number. Then there are always two numbers $ m \in \Z $ and $ r \in \N $, with $ 0 \leq r <b $ such that
\begin{equation}
\label{eq: euklidean_division}
a = m \cdot b + r
\end{equation}
This decomposition of $a$ given $b$ is called \textbf{Euklidean division} or \textbf{division with remainder} and $ a $ is called the \textbf{divident}, $ b $ is called the \textbf{divisor},$m$ is called the quotient and $r$ is called the \textbf{remainder}. 
\end{theorem}
\begin{remark}
\label{eq: euklidean_division_notation}
If $ a, b, m $ and $ r $ satisfy the equation (\ref{eq: euklidean_division}), we often write $ \Zdiv{a}{b}: = m $ to describe the quotient and use the symbol $ \Zmod{a}{b}: = r $ for the remainder. We also say, that an integer $ a $ is divided by a number $ b $ if $ \Zmod{a}{b} = 0 $ holds. In this case we also write $ a | b $ (\cite{AL} Note 1 below).
\end{remark}
\begin{example}
Using our previously defined notation, we have $ \Zdiv{-17}{4 } = - 5 $ and $ \Zmod{-17}{4} = 3 $, because $ -17 = -5 \cdot 4 + 3 $  is the Euklidean division of $-17$ and $4$ (Since the remainder is by definition a non-negative number). In this case $4$ does not divide $-17$ as the reminder is not zero. Writing $-17 | 4$ therefore has no meaning.

On the other hand we can write $12 | 4$, since $4$ divides $12$, as $ \Zmod{12}{4} = 0 $.
\end{example}
A fundamental property of Euklidean division is that both the quotient and the remainder exist and are unique. The result is therefore independent of any algorithm that actually does the computation.

Methods for computing the division with remainder are called \textit{integer division algorithms}. Probably the best known algorithm is the so called \textit{long division}, that most of us might have learned in school. It should be noted however that there are faster algorithms like \textit{Newtonâ€“Raphson division} known.

As long division is the standard algorithm used for pen-and-paper division of multi-digit numbers expressed in decimal notation, the reader should become familiar with this algorithm as we use it all over this book when we do simple pen-and-paper computations.

In a nutshell, the algorithm shifts gradually from the left to the right end of the dividend, subtracting the largest possible multiple of the divisor (at the digit level) at each stage; the multiples then become the digits of the quotient, and the final difference is then the remainder. To be more precise one version of the algorithm looks like this:

\begin{algorithmic}
\State Divide $n$ by $d$
\State If $d = 0$ then error(DivisionByZeroException) end
\State $Q \leftarrow 0 $ -- Initialize quotient to zero
\State $R \leftarrow 0 $ -- Initialize remainder to zero               
\State TO APPEAR
\end{algorithmic}

\begin{example}[Integer Log Division] To give an example of the basic integer long division algorithm most of us learned at school, lets divide the integer $157843853$ by the number $261$. 

So the goal is to find quotient and reminder $m,r \in \N$ such that
$$157843853 = 261 * m +r$$
holds. Using a notation that is mostly used in Commonwealth countries we can then compute
%\longdivision{157843853}{261} 

TO-APPEAR 
\end{example}



Another important tool in the theory of integers is the so-called \textit{extended Euclidean algorithm}. This calculates the greatest common divisor $ ggT (a, b) $ of two natural numbers $ a $ and $ b \in \N $, as well as two further integers $ s $ and $ t \in \Z $, see above that's the equation
\begin{equation}
\label{eq: erw_Eukl_algo}
gcd (a, b) = s \cdot a + t \cdot b
\end{equation}
The following pseudocode shows in detail how to calculate these numbers with the extended Euclidean algorithm (\cite{JB} chapter 2.9):
\begin{definition} [Extended Euclidean Algorithm]
\label{theorem: ext_Euclid}
Let the natural numbers $ a, b \in \N $ be given. Then the so-called \textit{extended Euclidean algorithm} is given by the following calculation rule:
\begin{algorithmic}
\State $ \begin{array}{ccccc}
r_0: = a, & r_1: = b, & s_0: = 1, & s_1: = 0, & k: = 1
\end{array} $
\While{$ r_{k} \neq 0 $}
\State $ q_k: = \Zdiv{r_{k-1}}{r_k} $
\State $ r_{k + 1}: = r_{k-1} -q_k \cdot r_k $
\State $ s_{k + 1}: = s_{k-1} -q_k \cdot s_k $
\State $ k \gets k + 1 $
\EndWhile
\end{algorithmic}
The result provides the integers $ ggT (a, b): = r_k $, as well as $ s: = s_k $ and $ t: = \Zdiv{(r_k-s_k \cdot a)}{b} $, which make up the equation
$ ggT (a, b) = s \cdot a + t \cdot b $ meet.
\end{definition}
\begin{example} To illustrate the algorithm to the reader, we apply it to the pair of numbers $ (12,5) $ in this example.
We expect:
\begin{center}
  \begin{tabular}{c | c c l}
    k & $ r_k $ & $ s_k $ & $ t_k = \Zdiv{(r_k-s_k \cdot a)}{b} $ \\\hline
    0 & 12 & 1 & 0 \\
    1 & 5 & 0 & 1 \\
    2 & 2 & 1 & -2 \\
    3 & 1 & -2 & 5 \\
  \end{tabular}
\end{center}
From this one can see that $ 12 $ and $ 5 $ are relatively prime (since their greatest common factor is $ ggT (12.5) = 1 $) and that the equation $ 1 = (-2) \cdot 12 + 5 \cdot 5 $ applies.
\end{example}

\section{Galois fields}

the theory of prime numbers and provide few basic properties like the fundamental theorem of arithmetic, which says that every natural number can be represented as a finite product of prime numbers.

Then we describe what congruences are, define residue class rings and develop their arithmetic. We pay special attention to those residual classes where the modulus is a prime number, because the resulting sets are so called prime fields ....
 
The classic \cite{HW} is recommended to the interested reader who wants to delve into number theory. In addition, \cite{FO} is a somewhat more application-oriented book, which certainly has a lot to offer the reader interested in cryptology.
 
In the following, $\mathbb{Z} $ always denotes the ring of integers, $\mathbb{N}$ the set of positive integers and $\mathbb{N}_0$ the set of non-negative integers.

\subsection{prime numbers}
A prime number $ p \in \N $ is a natural number $ p \geq 2 $, which is an integer and without a remainder, only divisible by itself and by $ 1 $. Such a prime number is called \textit{odd} if it is not the number $ 2 $. We write $ \Prim $ for the set of all prime numbers and $ \Prim _{\geq 3} $ for the set of all odd prime numbers.

As the Greek mathematician Euclid was able to prove by contradiction in the famous \textit{theorem of Euclid}, there can be no largest prime number. The set of all prime numbers is thus infinite \cite{AL}.

Since prime numbers are especially natural numbers, they can be ordered according to size, so that one can get the sequence
\begin{equation}
\label{eq: primenumber_sequence}
p_n: = 2, 3, 5, 7, 11, 13, 17, 19, 23, 29, 31, 37, 41, 43, 47, 53, 59, 61, 67, \ldots
\end{equation}
of all prime numbers (sequence $ A000040 $ in OEIS or \cite{HW} chapter 1.4). In particular, one can speak of small and large prime numbers.

As the following theorem shows, prime numbers are in a certain sense the basic units from which all other natural numbers are composed:
\begin{theorem}[fundamental theorem of arithmetic]
\label{def: primfactor_decomposition}
Let $ n \in \N_{\geq 2} $ be a natural number. Then prime numbers exist
$ p_1, p_2, \ldots, p_k \in \Prim $, such that:
\begin{equation}
n = p_1 \cdot p_2 \cdot \ldots \cdot p_k \;.
\end{equation}
Except for the permutation of the factors, this representation is unambiguous and is called the \textit{prime factorization} of $ n $.
\end{theorem}
\begin{proof} (\cite{AL} sentence 6.) 
\end{proof}
\begin{remark}
The proof of the previous theorem (\ref{def: primfactor_decomposition}) is not constructive and the question remains how quickly the prime factorization of a natural number can be calculated in principle. This is the famous \textit{factoring problem}. So much for today is known, there is no method on a classical Turing machine that calculates this representation in polynomial time. The fastest algorithms known today run sub-exponentially, ie $\mathcal{O}((1+ \epsilon)^n)$ applies for a $ \epsilon> 0 $. Interested readers can find more on this exciting topic in \cite{JB} Chapter 10.
\end{remark}
\begin{remark}
It should be pointed out at this point that the American mathematician Peter Williston Shor developed an algorithm in 1994 which can calculate the prime factor representation of a natural number in polynomial time on a quantum computer \cite{PS}.

The consequence of this is, of course, that cryosystems, which are based on the time complexity of the prime factor problem, are unsafe as soon as practically usable quantum computers are available.
\end{remark} 

\subsection{remainder class arithmetic}
Congruence or remainder class arithmetic is of central importance for understanding most modern crypto systems. In this section we will therefore take a closer look at this arithmetic. For the notation of remainder class arithmetic in cryptology see also \cite{JB} Chapter 3, or \cite{AL} Chapter 3.

\paragraph{Congruences and modular arithmetic.}


With the help of the whole number division with remainder, the congruence of two whole numbers with respect to a so-called module can be defined as follows
(\cite{JB} chapter 3.1):
\begin{definition} [congruence] Let $ a $, $ b \in \Z $ be two whole numbers and $ n \in \N $ a natural number.
Then $ a $ and $ b $ \textit{congruent with respect to the module} $ n $, if the equation
\begin{equation}
\Zmod{a}{n} = \Zmod{b}{n}
\end{equation}
is fulfilled. In this case we also write
$ \kongru{a}{b}{n} $. If two numbers are not congruent with respect to a given module, we also call them \textit{incongruent}.
\end{definition}
The following sentence describes a fundamental property of modulo arithmetic, which is not known from traditional arithmetic in $ \Z $ (\cite{JB} chapter 3.11):
\begin{theorem} [Fermat's Little Theorem] Let $ p \in \Prim $ be a prime number
and $ k \in \mathbb{Z} $ is an integer, then:
\begin{equation}
\kongru{k ^ p}{k}{p} \;,
\end{equation}
\end{theorem}
\begin{proof} 
\end{proof}


Another theorem that is important for calculating with congruences is the following Chinese remainder sentence. Roughly speaking, he shows us how to use congruence systems (\cite{JB} chapter 3.15).

\begin{theorem} [Chinese remainder sentence]
For  $ k \in \N $ the coprime natural numbers $ n_1, \ldots n_k \in \N $ and the integers $ a_1, \ldots a_k \in \Z $ are given. Then there exists for the so-called \textit{simultaneous congruence}
\begin{equation}
\begin{array}{c}
\kongru{x}{a_1}{n_1} \\
\kongru{x}{a_2}{n_2} \\
\cdots \\
\kongru{x}{a_k}{n_k} \\
\end{array}
\end{equation}
a solution and all possible solutions of this congruence system are congruent modulo
$ n_1 \cdot \ldots \cdot n_k $.
\end{theorem}
\begin{proof} (\cite{JB} chapter 3.15)
\end{proof}
\begin{remark}
This is the classic Chinese remainder as it was known in ancient China. Under certain circumstances, this set can be extended to non-coprime modules $ n_1, \ldots, n_k $.
\end{remark}
\begin{example} To illustrate how to solve simultaneous congruences using the Chinese remainder theorem, let's look at the following simultaneous congruence in this example:
$$
\begin{array}{c}
\kongru{x}{4}{7} \\
\kongru{x}{1}{3} \\
\kongru{x}{3}{5} \\
\kongru{x}{0}{11} \\
\end{array}
$$
So here is $ N = 7 \times 3 \times 5 \times 11 = 1155 $, as well as
$ N_1 = 165 $, $ N_2 = 385 $, $ N_3 = 231 $ and $ N_4 = 105 $. From this we calculate with the extended Euclidean algorithm
$$
\begin{array}{cccc}
 1 = & -47 \times 7 & + & 2 \times 165 \\
 1 = & -128 \times 3 & + & 1 \times 385 \\
 1 = & -46 \times 5 & + & 1 \times 231 \\
 1 = & -19 \times 11 & + & 2 \times 105 \\
\end{array}
$$
so we have
$ e_1 = 2 \cdot 165 = 330 $, $ e_2 = 1 \cdot 385 = 385 $, $ e_3 = 1 \cdot 231 = 231 $ and $ e_4 = 2 \cdot 105 = 210 $, from which
$$
x = 4 \times 330 + 1 \times 385 + 3 \times 231 + 0 \times 210 = 2398
$$
as one solution. Because of $ \Zmod{2398}{1155} = 88 $ the set of all possible solutions of this simultaneous congruence is through
$ \{\ldots, -2222, -1067,88,1243, 2398, \ldots \} $ given. In particular, there are infinitely many different solutions.
\end{example}

\paragraph{Residual class rings and prime fields.}
Congruence Modulo $ n $ is an \"equivalence relation on the set of integers, whereby there are exactly $ n $ different equivalence classes. In doing so, we identify each equivalence class with the corresponding remainder of the integer division. The addition and multiplication of whole numbers can be continued to an addition and multiplication on the equivalence classes by simply choosing an animated representative from each class. Selects, adds or multiplies them as usual and then selects the equivalence class that contains the result.

This notation is standard, both in cryptology and in elementary number theory, and is necessary in order to be able to use things like inverses, roots, etc. to be able to speak. See Chapter 3 in \cite{JB} or Chapter 3 in \cite{AL}.

\begin{theorem}
\label{def: residual class ring}
Let $ n \in \N _{\geq 2} $ be a fixed, natural number and
$ \Z_n $ the set of equivalence classes of integers with respect to the  congruence modulo $ n $ relation. Then $ \Z_n $ forms a commutative ring with one element with respect to the addition and multiplication defined above. Besides that, $\Z_n $ is a field if and only if $ n $ is a prime number.
\end{theorem}
\begin{proof} (\cite{AL} sentence 1) Associativity, distributivity and commutativity of both addition and multiplication follow directly from the corresponding properties in $ \Z $.

The neutral element of addition is given by the equivalence class of $ 0 $, i.e. by the set $ \{\ldots, -2 \cdot n, -n, 0, n, 2 \cdot n, \ldots \} $ and that is additive The inverse of an equivalence class $ x \in \Z_n $ is given by the equivalence class $ nx \in \Z_n $. $ \Z_n $ is therefore a commutative group with regard to addition.

The neutral element of the multiplication is given by the equivalence class of $ 1 $, i.e. by the set $ \{\ldots, -2 \cdot + 1 n, -n + 1.1, n + 1.2 \cdot n + 1, \ldots \} $ given. So $ \Z_n $ is a commutative ring with one element.

To find the multiplicative inverse of an equivalent class $ x \in \mathbb{Z} _n $ with $ x \neq 0 $, we first assume that $ n $ is a prime number. Then $ ggt (x, n) = 1 $ and from the extended Euclidean algorithm it follows that there are integers $ s, t \in \mathbb{Z} $ with $ s \cdot x + t \cdot n = 1 $ gives. But this results in $ s \cdot x = 1 $ in $ \mathbb{Z} _n $, which shows that $ x $ is invertible, with $ x ^{- 1} = s $. So $ \mathbb{Z} _n $ is a field if $ n $ is a prime number.

On the other hand, if $ n $ is not a prime number, then there are natural numbers $ a $ and $ b $ with $ n = a \cdot b $ and $ 0 <a, b <n $. From this it follows that $ a \cdot b = 0 $ in $ \mathbb{Z} _n $. In this case, $ \Z_n $ is not free of zero divisors and therefore not a field.
\end{proof}
\begin{definition} [residue class rings and primes Korper] (\cite{JB} example 3.4.4 or \cite{AL} definition 3.1)
Let $ n \in \N _{\geq 2} $ be chosen. Then we write $ (\Z_n, +, \cdot) $ for the one described in the sentence (\ref{def: rest class ring}) commutative ring.

If $ n \in \Prim $ is also a prime number, then $ \Z_n $ is also called
\textit{Primary body for the characteristic} $ n $.
\end{definition}
\begin{remark} As can be seen from the proof of the theorem (\ref{def: residue class ring}), inverse elements in prime fields can be calculated as follows: If $ n $ is a prime number and $ x \in \Z_n $ is given, so one calculates $ s \times x + t \times n = 1 $ with the extended Euclidean algorithm and $ s = x ^{- 1} $ applies.
\end{remark}
The following important property immediately follows from Fermat's little theorem, for arithmetic is prime fields.
\begin{lemma}
\label{lemma: klein_satz_fermat}
Let $ p \in \Prim $ be a prime number and $ \Z_p $ be the prime body of the characteristic $ p $. Then applies
for all elements $ x \in \Z_p $.
\begin{equation}
\begin{array}{ccc}
x^p = x & \text{or} & x^{p-1} = 1 \text{for} x \neq 0 \;.
\end{array}
\end{equation}
\end{lemma}
\begin{proof}
\end{proof}
In order to better illustrate the definition of the remainder class rings to the reader, we calculate the prime body in the following example
$ \Z_5 $ in detail:
\begin{example} [The primary field $ \Z_5 $]
\label{primkoerper_z_5}
For $ n = 5 $ we have five equivalence classes of integers which are congruent modulo $ 5 $. We write
$$
\begin{array}{ccc}
0: = \{\ldots, -5,0,5,10, \ldots \}, &
1: = \{\ldots, -4,1,6,11, \ldots \}, &
2: = \{\ldots, -3,2,7,12, \ldots \} \\
3: = \{\ldots, -2,3,8,13, \ldots \}, &
4: = \{\ldots, -1,4,9,14, \ldots \}
\end{array}
$$
Addition and multiplication can now be transferred to the equivalence classes. This results in the following addition and multiplication tables in $ \Z_5 $:
\begin{center}
  \begin{tabular}{c | c c c c c}
    + & 0 & 1 & 2 & 3 & 4 \\\hline
    0 & 0 & 1 & 2 & 3 & 4 \\
    1 & 1 & 2 & 3 & 4 & 0 \\
    2 & 2 & 3 & 4 & 0 & 1 \\
    3 & 3 & 4 & 0 & 1 & 2 \\
    4 & 4 & 0 & 1 & 2 & 3 \\
  \end{tabular} \quad \quad \quad \quad
  \begin{tabular}{c | c c c c c}
$ \cdot $ & 0 & 1 & 2 & 3 & 4 \\\hline
      0 & 0 & 0 & 0 & 0 & 0 \\
      1 & 0 & 1 & 2 & 3 & 4 \\
      2 & 0 & 2 & 4 & 1 & 3 \\
      3 & 0 & 3 & 1 & 4 & 2 \\
      4 & 0 & 4 & 3 & 2 & 1 \\
  \end{tabular}
\end{center}

These two tables are all you need to be able to calculate in $ \Z_5 $. For example, to determine the multiplicative inverse of a remainder class, look for the entry that results in $ 1 $ in the product table. This is the multiplicative inverse of $ 4 $ For example $ 4 $ and the multiplicative inverse of $ 2 $ is $ 3 $. In $ \Z_5 $, $ 4^{- 1} = 4 $ and $ 2^{- 1} = 3 $.
\end{example}


\paragraph{square numbers and square roots}
In the last part of this subsection we have to deal with \textit{square numbers} and \textit{square roots} in remainder class rings. To do this, we first define what square roots actually are. We roughly follow Chapter 6.5 in \cite{HW} and limit ourselves to natural numbers with prime factor representations of different prime numbers:
\begin{definition} [quadratic remainder and square roots] Let
$ n \in \N _{\geq 2} $ a natural number, $ n = p_1 \cdot \ldots \cdot p_k $ the prime factor representation of $ n $, so that $ p_1, \ldots, p_k $ different in pairs and $ \Z_n $ is the remainder class ring modulo $ n $. Has the quadratic equation
\begin{equation}
x^2 = y
\end{equation}
for a given $ y \in \Z_n $ with $ y \neq 0 $ a solution $ x \in \Z_n $, we denote $ y $ as \textit{quadratic remainder} or square number and $ x $ as a \textit{square root of $ y $}. If the quadratic equation has no solution, however, we denote $ y $ as \textit{quadratic non-remainder}. For any $ y \in \Z_n $ we write
\begin{equation}
\sqrt{y} _{| n}: = \{x \in \Z_n \; | \; x^2 = y \}
\end{equation}
for the set of all square roots of $ y $ in the remainder class ring
$ \Z_n $. (If $ y $ is a quadratic non-remainder, then $ \sqrt{y}_{| n} = \emptyset $ and if $ y = 0 $, then $ \sqrt{y}_{| n} = \{0 \} $)
\end{definition}
\begin{remark}
The notation $ \sqrt{y}_{| n} $ for the root of square residues is not found in textbooks, but it is quite practical to clearly distinguish between roots in different residue class rings. The symbol $ \sqrt{y} $ is generally ambiguous and it must also be specified in which ring this root is actually meant.
\end{remark}
\begin{example} [square numbers in $ \Z_5 $] Let us consider the example
(\ref{primkoerper_z_5}) the square numbers are on the main diagonal of the second table. As you can see, in $ \Z_5 $ you can only get the square root of $ 0 $, $ 1 $ and $ 4 $. Here applies $ \sqrt{0}_{| 5} = \{0 \} $, $ \sqrt{1}_{| 5} = \{1,4 \} $, $ \sqrt{2}_{ | 5} = \emptyset $, $ \sqrt{3}_{| 5} = \emptyset $ and $ \sqrt{4}_{| 5} = \{2,3 \} $.
\end{example}

From the previous example we know that elements from $ \Z_5 $ have a maximum of two different square roots. However, as we shall see in the following, this does not apply in general $ \Z_n $. More precisely, the maximum number of possible square roots depends on how many prime numbers the prime factorization of $ n $ contains.

In order to describe in a given remainder class ring whether a remainder class is a square number (quadratic remainder) or not, we define (\cite{HW} chapter 6.5):
\begin{definition} [Legendre symbol] Let $ p \in \Prim $ be a prime number and
$ y \in \Z_p $ is a remainder class of the prime body. Then the so-called \textit{Legendre symbol} of $ y $ is defined as follows:
\begin{equation}
\label{eq: Legendre-symbol}
\left (\frac{y}{p} \right): =
\begin{cases}
1 & \text{if $ y $ is a quadratic remainder} \\
-1 & \text{if $ y $ is a quadratic non-remainder} \\
0 & \text{if $ y = 0 $}
\end{cases}
\end{equation}
\end{definition}
\begin{example}
If we look again at the example (\ref{primkoerper_z_5}) we have the following Legendre symbols
$$
\begin{array}{ccccc}
\left (\frac{0}{p} \right) = 0, &
\left (\frac{1}{p} \right) = 1, &
\left (\frac{2}{p} \right) = -1, &
\left (\frac{3}{p} \right) = -1, &
\left (\frac{4}{p} \right) = 1 \;.
\end{array}
$$
\end{example}


The following sentence gives a simple criterion for calculating the legend symbol of a remainder class in a prime body. It should be noted that the additive inverse of $ 1 $ in $ \Z_p $ is given by $ p-1 $. In $ \Z_p $ applies $ -1 = p-1 $.
\begin{theorem} [Euler criterion] Let $ p \in \Prim_{\geq 3} $ be an odd one
Prime number and $ y \in \Z_p $ a remainder class. Then applies
\begin{equation}
\label{eq: Euler_criterium}
\left (\frac{y}{p} \right) = y^{\frac{p-1}{2}} \;.
\end{equation}
\end{theorem}
\begin{proof} (\cite{HW} proposition 83) 
\end{proof}
Now that we know what quadratic residues and non-residues are,
the question arises how to compute square roots in residual class rings. One has to distinguish whether the given modulus is a prime number or not. As we shall see, effective calculation methods only exist in the case of a prime number. In the other case, finding square roots is as difficult as prime factorization of the modulus.

So let's first look at the case of the prime numbers. The case $ \Z_2 $ is quickly described: Because $ 0^2 = 0 $ and
$ 1 ^ 2 = 1 $ in $ \Z_2 $ every number is a square number and at the same time a root of itself. We can therefore restrict ourselves to odd prime numbers in the following. As the following theorem (\ref{theorem: square_roots}) shows, there are two different sub-fields, depending on whether the odd prime number is congruent to $ 1 $ or $ 3 $ modulo $ 4 $ (\cite{HW} Chapter 6.5):
\begin{theorem} [square roots in primaries]
\label{theorem: square_roots}
Let $ n \in \mathbb{P}_{\geq 3} $ be an odd prime number. Then applies
$$ \kongru{n}{1}{4} \text{or} \kongru{n}{3}{4} $$
In the first case the roots $ \sqrt{y}_{| n} $ of a square number can be calculated by the so-called \textit{Tonelli-Schanks} algorithm and in the second case $ n = 4 \cdot k +3 $ for \"for a $ k \in \NN $ and the two roots $ \sqrt{y}_{| n} $ of a square number are through
given the set $ \{y ^{k + 1}, n-y ^{k + 1} \} $.
\end{theorem}
\begin{proof}\end{proof}
\begin{remark}
As can be seen from the previous theorem (\ref{theorem: square_roots}), the computation of square roots in a prime field is particularly quick and easy if the prime number is congruent $ 3 $ modulo $ 4 $.

This is also used in 
\end{remark}



\begin{definition} [Tonelli-Shanks algorithm]
\label{def: Tonelli-Shanks}
Let $ p $ be an odd prime number $ p \in \Prim _{\geq 3} $ and $ y $ a quadratic remainder in $ \Z_p $. Then the so-called algorithm by Tonneli \cite{TA} and Shanks \cite{SD} is defined as follows:
\begin{enumerate}
\item Find $ Q, S \in \Z $ with $ p-1 = Q \cdot 2 ^ S $ such that $ Q $ is odd.
\item Find an arbitrary quadratic non-remainder $ z \in \Z_p $.
\item
\begin{algorithmic}
\State $ \begin{array}{ccccc}
M: = S, & c: = z ^ Q, & t: = y ^ Q, & R: = y ^{\frac{Q + 1}{2}}, & M, c, t, R \in \Z_p
\end{array} $
\While{$ t \neq 1 $}
\State Find the smallest $ i $ with $ 0 <i <M $ and $ t ^{2 ^ i} = 1 $
\State $ b: = c ^{2 ^{M-i-1}} $
\State $ \begin{array}{ccccc}
M: = i, & c: = b ^ 2, & t: = tb ^ 2, & R: = R \cdot b
\end{array} $
\EndWhile
\end{algorithmic}
The result is then the two remainder classes $ r_1: = R $ and $ r_2: = p-R $.
\end{enumerate}
\end{definition}
\begin{theorem} Let $ p $ be an odd prime number $ p \in \Prim _{\geq 3} $ and $ y $ a quadratic remainder in $ \Z_p $. Then the following applies: The Tonelli Shanks algorithm terminates and the two results $ r_1 $ and $ r_2 $ are the two square roots of $ y $.
\end{theorem}
\begin{proof}
\end{proof}

\begin{remark}
The algorithm (\ref{def: Tonelli-Shanks}) works in prime fields for any odd prime numbers. From a practical point of view, however, it only makes sense if the prime number is congruent to $ 1 $ modulo $ 4 $, since in the other case the formula from the proposition \ref{theorem: square_roots}, which can be calculated more quickly, can be used.
\end{remark}

Now that we know how to compute roots in primaries, the question remains how to find roots in general residue class rings. As the following theorem shows, these are computed by first decomposing the modulus into prime factors and then the roots is calculated in the corresponding primaries. Then the Chinese remainder theorem is used to calculate the roots in the given ring.
\begin{theorem}
\label{theorem: square_root_construction}
Its $ n \in \N _{\geq 2} $ a natural number
with prime factor representation $ n = p_1 \cdot \ldots \cdot p_k $, so that the prime numbers $ p_1, \ldots, p_k $ are different in pairs and $ y \in \Z_n $ is a square number. Then the set of all square roots $ \sqrt{y} _{| n} $ of $ y $ in $ \Z_n $ is given by the solution set of all simultaneous congruences
\begin{equation}
\begin{array}{ccr}
\kongru{x}{x_1}{p_1} &, & x_1 \in \sqrt{y} _{| p_1} \\
\cdots \\
\kongru{x}{x_k}{p_k} &, & x_k \in \sqrt{y} _{| p_k} \\
\end{array}
\end{equation}
given, where one element is to be taken from each set of roots. In total, $ y $ has $ | \sqrt{y} _{| p_1} | \cdot \ldots \cdot | \sqrt{y} _{| p_k} | $ different roots in $ \Z_n $.
\end{theorem}
\begin{proof}
\end{proof}
\begin{example} To clarify the constructive proof of the previous theorem, we want to calculate all square roots of $ 4 $ in $ \Z_{15} $. Since $ 15 $ has the prime factorization $ 15 = 3 \cdot 5 $, we first calculate the square roots of $ 4 $ in $ \Z_3 $ and $ \Z_5 $.

Because of $ \kongru{1}{4}{3} $, the roots in $ \Z_3 $ result in $ \sqrt{4} _{| 3} = \sqrt{1} _{| 3} = \{ 1.2 \} $. From example (\ref{primkoerper_z_5}) we also know that the square roots of $ 4 $ in $ \Z_5 $ are given by $ \sqrt{4} _{| 3} = \{2,3 \} $.

Next we apply the Chinese remainder theorem. We define
$ N = 15 $, $ N_1 = 5 $ and $ N_2 = 3 $. With the extended Euclidean algorithm
we then calculate $ 1 = 2 \times 3 + (-1) \times 5 $, with which one
$ e_1 = -5 $ and $ e_2 = 6 $ determined.

With this you can now easily write the roots of $ 4 $ in $ \Z_{15} $ through all combinations of the roots in $ \Z_3 $ and $ \Z_5 $:
\begin{equation}
\begin{array}{rcl}
x_1 = 1 \times (-5) + 2 \times 6 & = & 7 \\
x_2 = 1 \times (-5) + 3 \times 6 & = & 13 \\
x_3 = 2 \times (-5) + 2 \times 6 & = & 2 \\
x_4 = 2 \times (-5) + 3 \times 6 & = & 8 \\
\end{array}
\end{equation}
In the remainder class ring $ \Z_{15} $, $ 4 $ is a quadratic remainder and it holds
$ \sqrt{4} _{| 15} = \{2,7,8,13 \} $.
\end{example}
From the previous sentence there is a method to constructively compute square roots in remainder class rings. Since one needs the prime factorization of the module for this, it is as complex as the prime factor problem. It remains to be shown that there cannot be a faster process. The following sentence does this:
\begin{theorem}
\label{theorem: square_roots_as_compl_as_factor}
The computation of all square roots of a square number in a remainder class ring $ \Z_n $ is at least as complex as the prime factorization of $ n $.
\end{theorem}
\begin{proof}
\end{proof}

\subsection{Polynome}
Following \cite{LK} we want to develop the ring of polynomials or the formal power series. To do this, we first specify the underlying quantities, then describe the corresponding addition and multiplication and finally state some norms on them:
\begin{definition} [Polynomials]
Let R be a commutative integrity domain with unit 1.
Then we name the expression
\begin{equation}
\sum _{n = 0} ^{m}{a} _{n}{t} ^{n} ={a} _{0} +{a} _{1} t +{a} _{2} t ^ 2 + \dots + a_m t ^ m \;,
\end{equation}
with the unknown $ t $ and the coefficients $ a_n $ from R
\textit{Polynomial with coefficients from R} and write
$ R [t] $ for the set of all polynomials with coefficients from R.
\end{definition}
We often simply write $ P (t) $ for a polynomial or a formal power series and denote the constant term accordingly with $ P (0) $. Furthermore, we always see it as a given, we also simply write "formal power series" when we actually mean "formal power series with coefficients in $ R $".
\begin{example}
\label{def: zero polynomial}
The so-called \textit{zero polynomial} (or the zero series) is the polynomial (or the formal power series) $ \sum_{n = 0} ^ \infty a_n t ^ n $ which (s) arises when we use all coefficients as Assume zero, ie set $ a_n = 0 $ for all $ n \in \mathbb{N} $. In analogy to the additively neutral element $ 0 \in R $, we also simply write $ 0 $ for this polynomial (this series).

The so-called \textit{single polynomial} (or the one series) is the polynomial (or the formal power series) $ \sum_{n = 0} ^ \infty a_n t ^ n $ which (s) arises when we $ a_0 = Set 1 $ and assume all other coefficients as zero, ie $ a_n = 0 $ for \"ur all $ n \in \mathbb{N} $. In analogy to the multiplicatively neutral element $ 1 \in R $, we also simply write $ 1 $ for this polynomial (this series).
\end{example}
\begin{definition} [degree] The \textit{degree} $ degree (P (t)) $ of a polynomial
$ P (t) \in R [t] $ is defined as follows: If $ P (t) $ is the zero polynomial, we set $ Grad (P (t)): = - \infty $. For every other polynomial we set $ degree (P (t)) = n $ if $ a_n $ is the highest non-vanishing coefficient of $ P (t) $.
\end{definition}
In order to be able to make the set of these polynomials or the formal power series into a commutative integral ring, we have to introduce the sum and the product of two formal power series and then show that the ring axioms are met. "ullt are. The following definition gives the corresponding operations for formal power series
(see e.g. \cite{LK}). A definition for polynomials is analogous.
\begin{definition} Let $ \sum _{n = 0} ^{\infty}{a} _{n}{t} ^{n} $ and
$ \sum _{n = 0} ^{\infty}{b} _{n}{t} $ select two formal power series
$ R [[t]] $. Then your \textit{sum} and your \textit{product}
defined as follows:
\begin{equation}
\sum _{n = 0} ^{\infty}{a} _{n}{t} ^{n} + \sum _{n = 0} ^{\infty}{b} _{n}{t } ^{n} = \sum _{n = 0} ^{\infty}{({a} _{n} +{b} _{n})}{t} ^{n}
\end{equation}
\begin{equation}
\bigg (\sum _{n = 0} ^{\infty}{a} _{n}{t} ^{n} \bigg) \cdot \bigg (\sum _{n = 0} ^{\infty }{b} _{n}{t} ^{n} \bigg) = \sum _{n = 0} ^{\infty} \sum _{i = 0} ^{n}{a} _{i }{{b} _{ni}}{t} ^{n}
\end{equation}
\end{definition}
In the case of polynomials, it is only necessary to note that the degree of the sum is exactly the maximum of the degrees of the summands and that the degree of the product is exactly the sum of the degrees of the factors.

To see that the ring axioms are fulfilled, it is first clear that both polynomials and formal power series form a commutative group with respect to addition, the neutral element being the zero polynomial $ 0 $ and the additive inverse element is given by $ - \sum_{n = 0} ^ \infty a_n t ^ n $ The properties of a commutative group then follow from the corresponding properties in $ R $.

For the multiplication one sees immediately that the single polynomial is the neutral element and that commutativity or associativity follow from the corresponding properties in $ R $.

The distributive laws also result from the corresponding rules in $ R $, so that overall it is shown


Since bodies, complete bodies and their algebraic closings play a central role in the analogy between Bernoulli and Carlitz-Bernoulli numbers, in the following we want all of the definitions and definitions that are important to us Briefly repeat and summarize the necessary properties on this topic.
For a detailed consideration of the so-called body theory see for example Chapter 13 in \cite{MA} and for the mentioned analogy see \cite{DG} and \cite{DT}.
\begin{definition} [body]
A body $ (\mathbb{K}, +, \cdot) $ is a set $ \mathbb{K} $, provided with two links $ +: \mathbb{K} \times \mathbb{K} \to \mathbb{K} $ and $ \cdot: \mathbb{K} \times \mathbb{K} \to \mathbb{K} $, called \textit{addition} and \textit{multiplication}, so that the following conditions are met :
\begin{itemize}
\item $ \left (\mathbb{K}, + \right) $ is an Abelian group, where the neutral element is denoted here with $ 0 $.
\item $ \left (\mathbb{K} \setminus \left \{0 \right \}, \cdot \right) $ is an Abelian group, where the neutral element is called $ 1 $.
\item For all $ a, b, c \in \mathbb{K} $ the distributive laws apply:
$$ a \cdot \left (b + c \right) = a \cdot b + a \cdot c \quad \text{and} \quad
\left (a + b \right) \cdot c = a \cdot c + b \cdot c $$
\end{itemize}
The \textit{characteristic} of a body $ \mathbb{K} $ is the smallest natural number $ n \geq 1 $, for which the $ n $ -fold sum of the one $ 1 $ equals zero, ie f \"ur which $ \sum_{i = 1} ^ n 1 = 0 $ applies.
If such a $ n> 0 $ exists, the body is also called \textit{finite characteristic}. If, on the other hand, every finite sum of ones is not equal to zero, then the body will have the characteristic $ 0 $ and one also speaks of a \textit{vanishing} characteristic.

A body $ \mathbb{K} $ is called \ss{} t \textit{completely \"andig} if
it is complete as a ring. A complete body
is also called \textit{non-Archimedean} if it is not Archimedean as a ring.

A body $ \mathbb{K} $ is called \textit{algebraically closed} if every non-constant polynomial $ P (t) \in \mathbb{K} [t] $
has a root in $ \mathbb{K} $.
\end{definition}
\begin{definition} [The finite bodies] Let $ p \in \mathbb{N} $ be a prime number. Then $ \mathbb{K} _p $ denotes the \textit{remainder class body \"orper} $ \mathbb{ Z} / p \mathbb{Z} $ and $ \mathbb{K} _{p ^ n} $, for each $ n \in \mathbb{N} $, the finite K (unique except for isomorphism) \"orper with $ p ^ n $ elements.
\end{definition} 



\subsection{Exponents and Logarithms}
